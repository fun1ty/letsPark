<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
          name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
  />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />

  <link rel="stylesheet" type="text/css" href="/reset.css" />
  <link rel="stylesheet" type="text/css" href="/font.css" />
  <link
          rel="stylesheet"
          media="screen and (max-width: 768px)"
          type="text/css"
          href="/publicParkingDetail.css"
  />
  <link
          rel="stylesheet"
          media="screen and (min-width: 768px)"
          type="text/css"
          href="/mqPublicParkingDetail.css"
  />

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <title>Document</title>
  <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
  />
</head>
<body>
<!-- header -->
<div class="header-container">
  <nav class="headbox">
    <div class="headermenu">
      <img
              src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/W_text_logo.svg"
              alt="ë¡œê³ "
              class="logo"
              onclick="window.location.href='/'"
      />

      <div class="menu-icons">
        <div class="menu-icon" onclick="reservationAlarm()">
          <img
                  src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/bell.svg"
                  alt="ì•ŒëŒ"
                  width="25px"
                  height="25px"
          />
        </div>
        <div class="menu-icon">
          <button id="menu-button" onclick="toggleMenu()">
            <img
                    src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/menu.svg"
                    alt="ë©”ë‰´"
                    width="25px"
                    height="25px"
            />
          </button>
        </div>
      </div>
    </div>

    <div id="menu-container" class="menu">
      <button id="close-button" onclick="closeMenu()">
        <img
                src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/X.svg"
                alt="ë‹«ê¸°"
                width="25px"
                height="25px"
        />
      </button>

      <div style="margin: 20px">
        <button class="mypageEdit" onclick="profileEdit()">
          <div>
            <img id="profilePic" alt="profile" width="30px" height="30px" />
          </div>
          <div>
            <div class="userNick">íŒŒí‚¹í¼ì‹œë¸”</div>
          </div>
        </button>
      </div>

      <div>
        <button class="reservationButton" onclick="userReservation()">
          ì˜ˆì•½ ë‚´ì—­ ë³´ê¸°
        </button>
      </div>
      <div class="noticeBox">
        <ul class="menuContainer">
          <li onclick="parkingAdd()">
            ğŸš™ ê³µìœ ì£¼ì°¨ì¥ ë“±ë¡
            <img
                    src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/Vector.svg"
                    alt="ì´ë™"
                    width="14px"
                    height="14px"
                    class="chevronRight"
            />
          </li>
          <li onclick="getMySharePark()">
            ğŸš™ ë‚´ ê³µìœ ì£¼ì°¨ì¥ ëª©ë¡
            <img
                    src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/Vector.svg"
                    alt="ì´ë™"
                    width="14px"
                    height="14px"
                    class="chevronRight"
            />
          </li>

          <li type="button" id="chat" onclick="chatListBtn()">
            ğŸ’¬ ì±„íŒ…ë°©
            <img
                    src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/Vector.svg"
                    alt="ì´ë™"
                    width="14px"
                    height="14px"
                    class="chevronRight"
            />
          </li>
          <li>ğŸ’° í¬ì¸íŠ¸</li>
        </ul>
      </div>
      <h5>ì´ìš©ì•ˆë‚´ ë° ë¬¸ì˜í•˜ê¸°</h5>
      <br />
      <!-- <a href="/user/login">ë¡œê·¸ì¸í•˜ê¸°</a><br /> -->
      <h5 class="payButton">ê²°ì œë‚´ì—­</h5>
      <div class="logoutBox">
            <span
                    id="loginLogoutButton"
                    class="logoutService"
                    onclick="logout()"
            >ë¡œê·¸ì¸/íšŒì›ê°€ì…</span
            >
      </div>

      <!-- ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ -->
      <!-- <form name="user-info-form">
        <label for="userid">User ID:</label>
        <input type="text" id="userid" name="userid" readonly />
        <br />
        <label for="password">Password:</label>
        <input type="text" id="password" name="password" readonly />
        <br />
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" readonly />
        <br />
        <label for="nickname">Nickname:</label>
        <input type="text" id="nickname" name="nickname" readonly />
        <br />
        <label for="phone">Phone:</label>
        <input type="text" id="phone" name="phone" readonly />
        <br />
      </form> -->
    </div>
    <input type="hidden" id="kakaoLat" />
    <input type="hidden" id="kakaoLng" />
    <div id="search-bar">
      <form onsubmit="searchPlaces(); return false;">
        <div class="search-container">
          <input
                  type="text"
                  id="search-input"
                  name="q"
                  placeholder="ëª©ì ì§€ ë˜ëŠ” ì£¼ì†Œ ê²€ìƒ‰"
          />
          <div class="filter-icon">
            <img
                    src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/filter.svg"
                    alt="í•„í„°"
                    width="25px"
                    height="25px"
            />
          </div>
          <button type="submit" id="search-button"></button>
        </div>
      </form>
    </div>
  </nav>
</div>
<input type="hidden" id="check" value="0" />
<div class="test">
  <div class="child1">
    <div class="taCenter title" style="font-size: 25px">
      <%= publicParkingDetailResult.name%>
    </div>
    <div class="taCenter otherTitle">
      <%= publicParkingDetailResult.address%>
    </div>
    <div class="taCenter otherTitle">
      <%= publicParkingDetailResult.tel%>
    </div>
    <div style="display: flex; justify-content: center">
      <div class="taCenter spContent" style="padding-top: 5px">
        í‰ì (<%= result.length%>) : <%= average%>&nbsp;&nbsp;
      </div>
      <div class="stars-outer">
        <!-- 5ê°œì˜ íšŒìƒ‰ ë³„ -->
        <!-- ë³„ 1 -->
        <svg class="star" viewBox="0 0 25 25">
          <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#ccc"
                  fill="#ccc"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
          ></path>
        </svg>
        <!-- ë³„ 2 -->
        <svg class="star" viewBox="0 0 25 25">
          <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#ccc"
                  fill="#ccc"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
          ></path>
        </svg>
        <!-- ë³„ 3 -->
        <svg class="star" viewBox="0 0 25 25">
          <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#ccc"
                  fill="#ccc"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
          ></path>
        </svg>
        <!-- ë³„ 4 -->
        <svg class="star" viewBox="0 0 25 25">
          <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#ccc"
                  fill="#ccc"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
          ></path>
        </svg>
        <!-- ë³„ 5 -->
        <svg class="star" viewBox="0 0 25 25">
          <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#ccc"
                  fill="#ccc"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
          ></path>
        </svg>

        <div class="stars-inner" style="width: <%= average * 10 * 2%>%">
          <!-- ë³„ì ì„ ì´ ë¶€ë¶„ì˜ ë„ˆë¹„ë¥¼ ì¡°ì ˆí•˜ì—¬ ì„¤ì •í•˜ì„¸ìš” -->
          <!-- 5ê°œì˜ ë…¸ë€ìƒ‰ ë³„ -->
          <!-- ë³„ 1 -->
          <svg class="star" viewBox="0 0 25 25">
            <path
                    d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                    stroke="#F7D358"
                    fill="#F7D358"
                    stroke-linejoin="round"
                    stroke-linecap="round"
                    stroke-width="1"
            ></path>
          </svg>
          <!-- ë³„ 2 -->
          <svg class="star" viewBox="0 0 25 25">
            <path
                    d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                    stroke="#F7D358"
                    fill="#F7D358"
                    stroke-linejoin="round"
                    stroke-linecap="round"
                    stroke-width="1"
            ></path>
          </svg>
          <!-- ë³„ 3 -->
          <svg class="star" viewBox="0 0 25 25">
            <path
                    d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                    stroke="#F7D358"
                    fill="#F7D358"
                    stroke-linejoin="round"
                    stroke-linecap="round"
                    stroke-width="1"
            ></path>
          </svg>
          <!-- ë³„ 4 -->
          <svg class="star" viewBox="0 0 25 25">
            <path
                    d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                    stroke="#F7D358"
                    fill="#F7D358"
                    stroke-linejoin="round"
                    stroke-linecap="round"
                    stroke-width="1"
            ></path>
          </svg>
          <!-- ë³„ 5 -->
          <svg class="star" viewBox="0 0 25 25">
            <path
                    d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                    stroke="#F7D358"
                    fill="#F7D358"
                    stroke-linejoin="round"
                    stroke-linecap="round"
                    stroke-width="1"
            ></path>
          </svg>
        </div>
      </div>
    </div>
    <div class="otherTitle" style="text-align: end; padding-bottom: 4px">
      ì´ ì£¼ì°¨ë©´ ê°¯ìˆ˜ - <%= publicParkingDetailResult.capacity%>
    </div>
    <div style="display: flex; justify-content: space-between">
      <div>
        <p
                style="
                background-color: lightgray;
                border: 1px solid lightgray;
                border-radius: 4px;
              "
        >
          ê³µì˜
        </p>
        <% if(publicParkingDetailResult.payyn === 'N') {%>
          <p
                  style="
                background-color: lightgray;
                border: 1px solid lightgray;
                border-radius: 4px;
              "
          >
            ë¬´ë£Œ
          </p>
        <% }%>
      </div>
      <p class="spaceb otherTitle">
        í˜„ì¬ ì£¼ì°¨ê°€ëŠ¥ ë©´ ê°¯ìˆ˜ - <%=
        publicParkingDetailResult.currentparking%>
      </p>
    </div>
    <hr />
    <div style="text-align: end">
      <% if(publicParkingDetailResult.payyn === 'N') {%>
        <span class="spContent">ë¬´ë£Œ</span>
      <% } else {%>
        <span class="spContent"
        ><%= publicParkingDetailResult.price.timerate%>ë¶„ë‹¹ <%=
            publicParkingDetailResult.price.rates%>ì›</span
        >
      <% }%>
    </div>
    <br />
    <div>
      <% let weekdayBegin =
              publicParkingDetailResult.operationtime.weekday_begin%> <% let
              weekdayEnd = publicParkingDetailResult.operationtime.weekday_end%> <%
      let weekendBegin =
              publicParkingDetailResult.operationtime.weekend_begin%> <% let
              weekEndEnd = publicParkingDetailResult.operationtime.weekend_end%> <%
      let holidayBegin =
              publicParkingDetailResult.operationtime.holiday_begin%> <% let
              holidayEnd = publicParkingDetailResult.operationtime.holiday_end%>
      <div class="spContent" style="text-align: end; padding: 3px">
        í‰ì¼ <%= weekdayBegin.substring(0, 2)%>:<%=
        weekdayBegin.substring(2, 4)%> ~ <%= weekdayEnd.substring(0,
                2)%>:<%= weekdayEnd.substring(2, 4)%>
      </div>
    </div>
    <div
            style="padding: 3px; display: flex; justify-content: space-between"
    >
      <span class="otherTitle">ìš´ì˜ì‹œê°„</span>
      <span class="spContent"
      >ì£¼ë§ <%= weekendBegin.substring(0, 2)%>:<%= weekEndEnd.substring(2,
                4)%> ~ <%= weekdayEnd.substring(0, 2)%>:<%= weekdayEnd.substring(2,
                4)%></span
      >
    </div>
    <div class="spContent" style="text-align: end; padding: 3px">
      ê³µíœ´ì¼ <%= holidayBegin.substring(0, 2)%>:<%= holidayEnd.substring(2,
              4)%> ~ <%= weekdayEnd.substring(0, 2)%>:<%= weekdayEnd.substring(2,
              4)%>
    </div>
  </div>
  <hr class="hr" style="margin: 0px;"/>
  <div class="child2">
    <div style="display: flex; justify-content: space-between">
      <div class="otherTitle">ë¦¬ë·°</div>
      <div class="otherTitle" onclick="modalOpen()" style="cursor: pointer">
        ë¦¬ë·°ì‘ì„±
        <img
                src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/PencilSquare.svg"
                style="width: 20px; height: 20px"
        />
      </div>
    </div>
    <hr />
    <% if(result.length === 0) {%>
      <div style="padding-top: 40px">
        <div class="title" style="text-align: center; font-size: 35px">
          ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤
        </div>
        <div class="title" style="text-align: center; font-size: 35px">
          ë¦¬ë·°ë¥¼ ì‘ì„±í•´ ë‹¤ë¥¸ ì´ìš©ìì—ê²Œ ë„ì›€ì„ ì£¼ì„¸ìš” !
        </div>
      </div>
    <% } else {%>
      <div>
        <% for(let review of result) {%>
          <div style="display: flex">
            <div class="profileImage" style="width: 40px; height: 40px"></div>
            <div>
              <div style="display: flex; justify-content: space-between">
                <div class="dovego" style="padding-top: 5px">
                  <%= review.nickname%>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </div>
                <div>
                  <div class="stars-outer">
                    <!-- 5ê°œì˜ íšŒìƒ‰ ë³„ -->
                    <!-- ë³„ 1 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                              d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                              stroke="#ccc"
                              fill="#ccc"
                              stroke-linejoin="round"
                              stroke-linecap="round"
                              stroke-width="1"
                      ></path>
                    </svg>
                    <!-- ë³„ 2 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                              d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                              stroke="#ccc"
                              fill="#ccc"
                              stroke-linejoin="round"
                              stroke-linecap="round"
                              stroke-width="1"
                      ></path>
                    </svg>
                    <!-- ë³„ 3 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                              d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                              stroke="#ccc"
                              fill="#ccc"
                              stroke-linejoin="round"
                              stroke-linecap="round"
                              stroke-width="1"
                      ></path>
                    </svg>
                    <!-- ë³„ 4 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                              d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                              stroke="#ccc"
                              fill="#ccc"
                              stroke-linejoin="round"
                              stroke-linecap="round"
                              stroke-width="1"
                      ></path>
                    </svg>
                    <!-- ë³„ 5 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                              d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                              stroke="#ccc"
                              fill="#ccc"
                              stroke-linejoin="round"
                              stroke-linecap="round"
                              stroke-width="1"
                      ></path>
                    </svg>

                    <div
                            class="stars-inner"
                            style="width: <%= review.score * 10 * 2%>%"
                    >
                      <!-- ë³„ì ì„ ì´ ë¶€ë¶„ì˜ ë„ˆë¹„ë¥¼ ì¡°ì ˆí•˜ì—¬ ì„¤ì •í•˜ì„¸ìš” -->
                      <!-- 5ê°œì˜ ë…¸ë€ìƒ‰ ë³„ -->
                      <!-- ë³„ 1 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                                stroke="#F7D358"
                                fill="#F7D358"
                                stroke-linejoin="round"
                                stroke-linecap="round"
                                stroke-width="1"
                        ></path>
                      </svg>
                      <!-- ë³„ 2 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                                stroke="#F7D358"
                                fill="#F7D358"
                                stroke-linejoin="round"
                                stroke-linecap="round"
                                stroke-width="1"
                        ></path>
                      </svg>
                      <!-- ë³„ 3 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                                stroke="#F7D358"
                                fill="#F7D358"
                                stroke-linejoin="round"
                                stroke-linecap="round"
                                stroke-width="1"
                        ></path>
                      </svg>
                      <!-- ë³„ 4 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                                stroke="#F7D358"
                                fill="#F7D358"
                                stroke-linejoin="round"
                                stroke-linecap="round"
                                stroke-width="1"
                        ></path>
                      </svg>
                      <!-- ë³„ 5 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                                stroke="#F7D358"
                                fill="#F7D358"
                                stroke-linejoin="round"
                                stroke-linecap="round"
                                stroke-width="1"
                        ></path>
                      </svg>
                    </div>
                  </div>
                </div>
              </div>
              <div
                      class="cafe24"
                      style="padding-top: 10px; padding-bottom: 10px"
              >
                <%= review.comment%>
              </div>
            </div>
            <% }%>
          </div>
      </div>
    <%}%>
  </div>
</div>

<div id="modalContainer" class="hidden">
  <div id="modalContent">
    <p class="title" style="padding: 20px; font-size: 30px">
      ì†Œì¤‘í•œ ë¦¬ë·°ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”
    </p>
    <p style="padding: 20px; font-weight: bolder">
          <span class="otherTitle" style="color: #8783f5"
          ><%= publicParkingDetailResult.name%> </span
          >ì–´ë– ì…¨ë‚˜ìš”?
    </p>
    <div
            style="display: flex; justify-content: space-between; margin: 20px"
    >
      <div class="otherTitle" style="font-size: 20px">í‰ì </div>
      <div class="rating">
        <span class="rating__result"></span>
        <i class="rating__star far fa-star"></i>
        <i class="rating__star far fa-star"></i>
        <i class="rating__star far fa-star"></i>
        <i class="rating__star far fa-star"></i>
        <i class="rating__star far fa-star"></i>
      </div>
    </div>
    <div style="display: flex; justify-content: center">
          <textarea
                  rows="20"
                  cols="40"
                  class="textContent spContent"
                  id="comment"
          ></textarea>
    </div>
    <div
            style="
            display: flex;
            justify-content: space-evenly;
            padding-top: 20px;
          "
    >
      <div class="modalBtn spBtn" id="modalCloseButton">ì·¨ì†Œí•˜ê¸°</div>
      <div
              class="modalBtn spBtn"
              onclick="enrollReview(<%= publicParkingDetailResult.id%>)"
      >
        ë¦¬ë·°ì‘ì„±
      </div>
    </div>
  </div>
</div>
<input type="hidden" id="score" />
</body>
<script>
  const ratingStars = [...document.getElementsByClassName('rating__star')];
  const ratingResult = document.querySelector('.rating__result');

  printRatingResult(ratingResult);

  function executeRating(stars, result) {
    const starClassActive = 'rating__star fas fa-star';
    const starClassUnactive = 'rating__star far fa-star';
    const starsLength = stars.length;
    let i;
    stars.map((star) => {
      star.onclick = () => {
        i = stars.indexOf(star);

        if (star.className.indexOf(starClassUnactive) !== -1) {
          printRatingResult(result, i + 1);
          for (i; i >= 0; --i) stars[i].className = starClassActive;
        } else {
          printRatingResult(result, i);
          for (i; i < starsLength; ++i)
            stars[i].className = starClassUnactive;
        }
      };
    });
  }

  function printRatingResult(result, num = 0) {
    result.textContent = `${num}/5`;
    const score = document.getElementById('score');
    score.value = `${num}`;
  }

  executeRating(ratingStars, ratingResult);

  function modalOpen() {
    const modalCloseButton = document.getElementById('modalCloseButton');
    const modal = document.getElementById('modalContainer');
    modal.classList.remove('hidden');

    modalCloseButton.addEventListener('click', () => {
      modal.classList.add('hidden');
    });
  }

  async function enrollReview(id) {
    const result = await axios({
      method: 'POST',
      url: '/publicparking/detail/reviews',
      data: {
        publicParkingId: id,
        score: document.getElementById('score').value,
        comment: document.getElementById('comment').value,
      },
      headers: {
        Authorization: `${localStorage.getItem('token')}`,
      },
    });
    console.log(result);

    if (result) {
      alert('ë¦¬ë·°ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.');
      document.location.href = `/publicparking/detail?id=${id}`;
    }
  }
  // ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì—¬ ë©”ë‰´ ìƒíƒœë¥¼ ì¶”ì í•©ë‹ˆë‹¤.
  var isMenuVisible = false;

  function toggleMenu() {
    var menu = document.getElementById('menu-container');
    if (!isMenuVisible) {
      menu.style.right = '0';
    } else {
      menu.style.right = '-300px';
    }

    // ë©”ë‰´ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
    isMenuVisible = !isMenuVisible;
  }
  // ë‹«ê¸° ë²„íŠ¼ì„ í´ë¦­í•  ë•Œ ë©”ë‰´ë¥¼ ìˆ¨ê¹ë‹ˆë‹¤.
  function closeMenu() {
    var menu = document.getElementById('menu-container');
    menu.style.right = '-300px';
    isMenuVisible = false;
  }

  // ì˜ˆì•½ ì•ŒëŒ ì´ë™
  function reservationAlarm() {
    location.href = '/user/reservation';
  }

  // íšŒì› ì •ë³´ ìˆ˜ì • ì´ë™
  function profileEdit() {
    location.href = '/mypage/:userid/edit';
  }

  // íšŒì› ì •ë³´ ìˆ˜ì • ì´ë™
  function profileEdit() {
    const token = localStorage.getItem('token');

    if (token) {
      axios
              .get('/data', {
                headers: {
                  Authorization: `Bearer ${token}`,
                },
              })
              .then((response) => {
                const userId = response.data.responseData.data.userid;
                console.log(userId);
                location.href = `/mypage/${userId}`;
              })
              .catch((error) => {
                console.log(error);
              });
    } else {
      location.href = '/user/login';
    }
  }

  // ì˜ˆì•½ë‚´ì—­ì¡°íšŒ ì´ë™
  function userReservation() {
    location.href = '/user/reservation';
  }

  // ë¡œê·¸ì¸ ìœ ë¬´ì— ë”°ë¥¸ ë‹‰ë„¤ì„ ê°’ í‘œì‹œ
  window.addEventListener('DOMContentLoaded', () => {
    const token = localStorage.getItem('token');
    const loginLogoutButton = document.getElementById('loginLogoutButton');
    const userNickElement = document.querySelector('.userNick'); // ì‚¬ìš©ì ë‹‰ë„¤ì„ ì—˜ë¦¬ë¨¼íŠ¸

    if (token) {
      // í† í°ì´ ìˆëŠ” ê²½ìš°
      loginLogoutButton.innerText = 'ë¡œê·¸ì•„ì›ƒ';

      axios
              .get('/data', {
                headers: {
                  Authorization: `Bearer ${token}`,
                },
              })
              .then((response) => {
                const userNickname = response.data.responseData.data.nickname;
                userNickElement.innerText = userNickname;
              })
              .catch((error) => {
                console.log(error);
              });
    } else {
      // í† í°ì´ ì—†ëŠ” ê²½ìš°
      userNickElement.innerText = 'ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”';
    }
  });

  //ë¡œê·¸ì•„ì›ƒ
  //ë¡œê·¸ì¸ ìƒíƒœ ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í† í° ë¹„ìš°ë„ë¡
  //ë¡œê·¸ì•„ì›ƒ ìƒíƒœ ì‹œ /user/login ì´ë™
  function logout() {
    const token = localStorage.getItem('token');
    const loginLogoutButton = document.getElementById('loginLogoutButton');

    if (token) {
      if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        localStorage.removeItem('token');
        loginLogoutButton.innerText = 'ë¡œê·¸ì¸/íšŒì›ê°€ì…';

        alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤!');

        //ë¡œê·¸ì•„ì›ƒ í›„ ìƒˆë¡œê³ ì¹¨
        setTimeout(() => {
          location.reload();
        }, 1000);
      }
    } else {
      location.href = '/user/login';
    }
  }

  window.addEventListener('DOMContentLoaded', () => {
    const token = localStorage.getItem('token');
    const loginLogoutButton = document.getElementById('loginLogoutButton');

    if (token) {
      loginLogoutButton.innerText = 'ë¡œê·¸ì•„ì›ƒ';
    }
  });

  //í”„ë¡œí•„ ì‚¬ì§„ ë„ìš°ê¸°
  const token = localStorage.getItem('token');
  if (token) {
    axios
            .get('/data', {
              headers: {
                Authorization: `Bearer ${token}`,
              },
            })
            .then((response) => {
              const profileUrl = response.data.responseData.data.profile;
              const profilePic = document.getElementById('profilePic');
              profilePic.src = profileUrl;
            })
            .catch((error) => {
              console.log(error);
            });
  } else {
    profilePic.src =
            'https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/profile.svg';
  }

  //ê³µìœ ì£¼ì°¨ì¥ë“±ë¡ ì´ë™
  function parkingAdd() {
    location.href = '/shareparking';
  }

  //ì±„íŒ…ë°© ì´ë™
  function chatBtn() {
    console.log('front ì±„íŒ…ë°©í´ë¦­');
    location.href = '/chat';
  }

  //myì±„íŒ…ë‚´ì—­
  function chatListBtn() {
    console.log('front ì±„íŒ…ë°©ë¦¬ìŠ¤íŠ¸ í´ë¦­');
    const token = localStorage.getItem('token');
    if (!token) {
      alert('ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”');
      return;
    } else {
      axios
              .get('/data', {
                headers: {
                  Authorization: `Bearer ${token}`,
                },
              })
              .then((response) => {
                console.log('chatList', response);
                const userid = response.data.responseData.data.id;
                console.log('íšŒì›ë²ˆí˜¸', userid);
                location.href = `/chatList/${userid}`;
              })
              .catch((error) => {
                console.log('chatListì—ëŸ¬', error);
                document.location.reload();
              });
    }
  }

  async function getMySharePark() {
    let id;
    let check;
    try {
      const result = await axios({
        method : 'POST',
        url : '/shareparking/mysharepark',
        headers: {
          Authorization: `${localStorage.getItem('token')}`,
        },
      });
      console.log(result);
      id = result.data.id;
      check = result.data.result;
    } catch (err) {
      console.log(err);
    }
    console.log('ë°–', id);
    if(check) {
      document.location.href = `/shareparking/myshareparks?id=${id}`;
    }
  }
</script>
</html>