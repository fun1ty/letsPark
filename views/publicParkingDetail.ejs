<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link rel="stylesheet" type="text/css" href="/reset.css" />
    <link rel="stylesheet" type="text/css" href="/font.css" />
    <link
      rel="stylesheet"
      media="screen and (max-width: 768px)"
      type="text/css"
      href="/publicParkingDetail.css"
    />
    <link
      rel="stylesheet"
      media="screen and (min-width: 768px)"
      type="text/css"
      href="/mqPublicParkingDetail.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
    />
  </head>
  <body>
    <!-- header -->
    <div class="header-container">
      <nav class="headbox">
        <div class="headermenu">
          <img
            src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/W_text_logo.svg"
            alt="Î°úÍ≥†"
            class="logo"
            onclick="window.location.href='/'"
          />

          <div class="menu-icons">
            <div class="menu-icon" onclick="reservationAlarm()">
              <img
                src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/bell.svg"
                alt="ÏïåÎûå"
                width="25px"
                height="25px"
              />
            </div>
            <div class="menu-icon">
              <button id="menu-button" onclick="toggleMenu()">
                <img
                  src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/menu.svg"
                  alt="Î©îÎâ¥"
                  width="25px"
                  height="25px"
                />
              </button>
            </div>
          </div>
        </div>

        <div id="menu-container" class="menu">
          <button id="close-button" onclick="closeMenu()">
            <img
              src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/X.svg"
              alt="Îã´Í∏∞"
              width="25px"
              height="25px"
            />
          </button>

          <div style="margin: 20px">
            <button class="mypageEdit" onclick="profileEdit()">
              <div>
                <img id="profilePic" alt="profile" width="30px" height="30px" />
              </div>
              <div>
                <div class="userNick">ÌååÌÇπÌçºÏãúÎ∏î</div>
              </div>
            </button>
          </div>

          <div>
            <button class="reservationButton" onclick="userReservation()">
              ÏòàÏïΩ ÎÇ¥Ïó≠ Î≥¥Í∏∞
            </button>
          </div>
          <div class="noticeBox">
            <ul class="menuContainer">
              <li onclick="parkingAdd()">
                üöô Í≥µÏú†Ï£ºÏ∞®Ïû• Îì±Î°ù
                <img
                  src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/Vector.svg"
                  alt="Ïù¥Îèô"
                  width="14px"
                  height="14px"
                  class="chevronRight"
                />
              </li>
              <li onclick="getMySharePark()">
                üöô ÎÇ¥ Í≥µÏú†Ï£ºÏ∞®Ïû• Î™©Î°ù
                <img
                  src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/Vector.svg"
                  alt="Ïù¥Îèô"
                  width="14px"
                  height="14px"
                  class="chevronRight"
                />
              </li>

              <li type="button" id="chat" onclick="chatListBtn()">
                üí¨ Ï±ÑÌåÖÎ∞©
                <img
                  src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/Vector.svg"
                  alt="Ïù¥Îèô"
                  width="14px"
                  height="14px"
                  class="chevronRight"
                />
              </li>
              <li>üí∞ Ìè¨Ïù∏Ìä∏</li>
            </ul>
          </div>
          <h5>Ïù¥Ïö©ÏïàÎÇ¥ Î∞è Î¨∏ÏùòÌïòÍ∏∞</h5>
          <br />
          <!-- <a href="/user/login">Î°úÍ∑∏Ïù∏ÌïòÍ∏∞</a><br /> -->
          <h5 class="payButton">Í≤∞Ï†úÎÇ¥Ïó≠</h5>
          <div class="logoutBox">
            <span
              id="loginLogoutButton"
              class="logoutService"
              onclick="logout()"
              >Î°úÍ∑∏Ïù∏/ÌöåÏõêÍ∞ÄÏûÖ</span
            >
          </div>

          <!-- ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï°∞Ìöå -->
          <!-- <form name="user-info-form">
        <label for="userid">User ID:</label>
        <input type="text" id="userid" name="userid" readonly />
        <br />
        <label for="password">Password:</label>
        <input type="text" id="password" name="password" readonly />
        <br />
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" readonly />
        <br />
        <label for="nickname">Nickname:</label>
        <input type="text" id="nickname" name="nickname" readonly />
        <br />
        <label for="phone">Phone:</label>
        <input type="text" id="phone" name="phone" readonly />
        <br />
      </form> -->
        </div>
        <input type="hidden" id="kakaoLat" />
        <input type="hidden" id="kakaoLng" />
        <div id="search-bar">
          <form onsubmit="searchPlaces(); return false;">
            <div class="search-container">
              <input
                type="text"
                id="search-input"
                name="q"
                placeholder="Î™©Ï†ÅÏßÄ ÎòêÎäî Ï£ºÏÜå Í≤ÄÏÉâ"
              />
              <div class="filter-icon">
                <img
                  src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/filter.svg"
                  alt="ÌïÑÌÑ∞"
                  width="25px"
                  height="25px"
                />
              </div>
              <button type="submit" id="search-button"></button>
            </div>
          </form>
        </div>
      </nav>
    </div>
    <input type="hidden" id="check" value="0" />
    <div class="test">
      <div class="child1">
        <div class="taCenter title" style="font-size: 25px">
          <%= publicParkingDetailResult.name%>
        </div>
        <div class="taCenter otherTitle">
          <%= publicParkingDetailResult.address%>
        </div>
        <div class="taCenter otherTitle">
          <%= publicParkingDetailResult.tel%>
        </div>
        <div style="display: flex; justify-content: center">
          <div class="taCenter spContent" style="padding-top: 5px">
            ÌèâÏ†ê(<%= result.length%>) : <%= average%>&nbsp;&nbsp;
          </div>
          <div class="stars-outer">
            <!-- 5Í∞úÏùò ÌöåÏÉâ Î≥Ñ -->
            <!-- Î≥Ñ 1 -->
            <svg class="star" viewBox="0 0 25 25">
              <path
                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                stroke="#ccc"
                fill="#ccc"
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="1"
              ></path>
            </svg>
            <!-- Î≥Ñ 2 -->
            <svg class="star" viewBox="0 0 25 25">
              <path
                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                stroke="#ccc"
                fill="#ccc"
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="1"
              ></path>
            </svg>
            <!-- Î≥Ñ 3 -->
            <svg class="star" viewBox="0 0 25 25">
              <path
                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                stroke="#ccc"
                fill="#ccc"
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="1"
              ></path>
            </svg>
            <!-- Î≥Ñ 4 -->
            <svg class="star" viewBox="0 0 25 25">
              <path
                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                stroke="#ccc"
                fill="#ccc"
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="1"
              ></path>
            </svg>
            <!-- Î≥Ñ 5 -->
            <svg class="star" viewBox="0 0 25 25">
              <path
                d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                stroke="#ccc"
                fill="#ccc"
                stroke-linejoin="round"
                stroke-linecap="round"
                stroke-width="1"
              ></path>
            </svg>

            <div class="stars-inner" style="width: <%= average * 10 * 2%>%">
              <!-- Î≥ÑÏ†êÏùÑ Ïù¥ Î∂ÄÎ∂ÑÏùò ÎÑàÎπÑÎ•º Ï°∞Ï†àÌïòÏó¨ ÏÑ§Ï†ïÌïòÏÑ∏Ïöî -->
              <!-- 5Í∞úÏùò ÎÖ∏ÎûÄÏÉâ Î≥Ñ -->
              <!-- Î≥Ñ 1 -->
              <svg class="star" viewBox="0 0 25 25">
                <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#F7D358"
                  fill="#F7D358"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
                ></path>
              </svg>
              <!-- Î≥Ñ 2 -->
              <svg class="star" viewBox="0 0 25 25">
                <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#F7D358"
                  fill="#F7D358"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
                ></path>
              </svg>
              <!-- Î≥Ñ 3 -->
              <svg class="star" viewBox="0 0 25 25">
                <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#F7D358"
                  fill="#F7D358"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
                ></path>
              </svg>
              <!-- Î≥Ñ 4 -->
              <svg class="star" viewBox="0 0 25 25">
                <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#F7D358"
                  fill="#F7D358"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
                ></path>
              </svg>
              <!-- Î≥Ñ 5 -->
              <svg class="star" viewBox="0 0 25 25">
                <path
                  d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                  stroke="#F7D358"
                  fill="#F7D358"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  stroke-width="1"
                ></path>
              </svg>
            </div>
          </div>
        </div>
        <div class="otherTitle" style="text-align: end; padding-bottom: 4px">
          Ï¥ù Ï£ºÏ∞®Î©¥ Í∞ØÏàò - <%= publicParkingDetailResult.capacity%>
        </div>
        <div style="display: flex; justify-content: space-between">
          <div>
            <p
              style="
                background-color: lightgray;
                border: 1px solid lightgray;
                border-radius: 4px;
              "
            >
              Í≥µÏòÅ
            </p>
            <% if(publicParkingDetailResult.payyn === 'N') {%>
            <p
              style="
                background-color: lightgray;
                border: 1px solid lightgray;
                border-radius: 4px;
              "
            >
              Î¨¥Î£å
            </p>
            <% }%>
          </div>
          <p class="spaceb otherTitle">
            ÌòÑÏû¨ Ï£ºÏ∞®Í∞ÄÎä• Î©¥ Í∞ØÏàò - <%=
            publicParkingDetailResult.currentparking%>
          </p>
        </div>
        <hr />
        <div style="text-align: end">
          <% if(publicParkingDetailResult.payyn === 'N') {%>
          <span class="spContent">Î¨¥Î£å</span>
          <% } else {%>
          <span class="spContent"
            ><%= publicParkingDetailResult.price.timerate%>Î∂ÑÎãπ <%=
            publicParkingDetailResult.price.rates%>Ïõê</span
          >
          <% }%>
        </div>
        <br />
        <div>
          <% let weekdayBegin =
          publicParkingDetailResult.operationtime.weekday_begin%> <% let
          weekdayEnd = publicParkingDetailResult.operationtime.weekday_end%> <%
          let weekendBegin =
          publicParkingDetailResult.operationtime.weekend_begin%> <% let
          weekEndEnd = publicParkingDetailResult.operationtime.weekend_end%> <%
          let holidayBegin =
          publicParkingDetailResult.operationtime.holiday_begin%> <% let
          holidayEnd = publicParkingDetailResult.operationtime.holiday_end%>
          <div class="spContent" style="text-align: end; padding: 3px">
            ÌèâÏùº <%= weekdayBegin.substring(0, 2)%>:<%=
            weekdayBegin.substring(2, 4)%> ~ <%= weekdayEnd.substring(0,
            2)%>:<%= weekdayEnd.substring(2, 4)%>
          </div>
        </div>
        <div
          style="padding: 3px; display: flex; justify-content: space-between"
        >
          <span class="otherTitle">Ïö¥ÏòÅÏãúÍ∞Ñ</span>
          <span class="spContent"
            >Ï£ºÎßê <%= weekendBegin.substring(0, 2)%>:<%= weekEndEnd.substring(2,
            4)%> ~ <%= weekdayEnd.substring(0, 2)%>:<%= weekdayEnd.substring(2,
            4)%></span
          >
        </div>
        <div class="spContent" style="text-align: end; padding: 3px">
          Í≥µÌú¥Ïùº <%= holidayBegin.substring(0, 2)%>:<%= holidayEnd.substring(2,
          4)%> ~ <%= weekdayEnd.substring(0, 2)%>:<%= weekdayEnd.substring(2,
          4)%>
        </div>
      </div>
      <hr class="hr" style="margin: 0px" />
      <div class="child2">
        <div style="display: flex; justify-content: space-between">
          <div class="otherTitle">Î¶¨Î∑∞</div>
          <div class="otherTitle" onclick="modalOpen()" style="cursor: pointer">
            Î¶¨Î∑∞ÏûëÏÑ±
            <img
              src="https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/PencilSquare.svg"
              style="width: 20px; height: 20px"
            />
          </div>
        </div>
        <hr />
        <% if(result.length === 0) {%>
        <div style="padding-top: 40px">
          <div class="title" style="text-align: center; font-size: 35px">
            ÏûëÏÑ±Îêú Î¶¨Î∑∞Í∞Ä ÏóÜÏäµÎãàÎã§
          </div>
          <div class="title" style="text-align: center; font-size: 35px">
            Î¶¨Î∑∞Î•º ÏûëÏÑ±Ìï¥ Îã§Î•∏ Ïù¥Ïö©ÏûêÏóêÍ≤å ÎèÑÏõÄÏùÑ Ï£ºÏÑ∏Ïöî !
          </div>
        </div>
        <% } else {%>
        <div>
          <% for(let review of result) {%>
          <div style="display: flex">
            <div class="profileImage" style="width: 40px; height: 40px"></div>
            <div>
              <div style="display: flex; justify-content: space-between">
                <div class="dovego" style="padding-top: 5px">
                  <%= review.nickname%>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                </div>
                <div>
                  <div class="stars-outer">
                    <!-- 5Í∞úÏùò ÌöåÏÉâ Î≥Ñ -->
                    <!-- Î≥Ñ 1 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                        d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                        stroke="#ccc"
                        fill="#ccc"
                        stroke-linejoin="round"
                        stroke-linecap="round"
                        stroke-width="1"
                      ></path>
                    </svg>
                    <!-- Î≥Ñ 2 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                        d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                        stroke="#ccc"
                        fill="#ccc"
                        stroke-linejoin="round"
                        stroke-linecap="round"
                        stroke-width="1"
                      ></path>
                    </svg>
                    <!-- Î≥Ñ 3 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                        d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                        stroke="#ccc"
                        fill="#ccc"
                        stroke-linejoin="round"
                        stroke-linecap="round"
                        stroke-width="1"
                      ></path>
                    </svg>
                    <!-- Î≥Ñ 4 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                        d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                        stroke="#ccc"
                        fill="#ccc"
                        stroke-linejoin="round"
                        stroke-linecap="round"
                        stroke-width="1"
                      ></path>
                    </svg>
                    <!-- Î≥Ñ 5 -->
                    <svg class="star" viewBox="0 0 25 25">
                      <path
                        d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                        stroke="#ccc"
                        fill="#ccc"
                        stroke-linejoin="round"
                        stroke-linecap="round"
                        stroke-width="1"
                      ></path>
                    </svg>

                    <div
                      class="stars-inner"
                      style="width: <%= review.score * 10 * 2%>%"
                    >
                      <!-- Î≥ÑÏ†êÏùÑ Ïù¥ Î∂ÄÎ∂ÑÏùò ÎÑàÎπÑÎ•º Ï°∞Ï†àÌïòÏó¨ ÏÑ§Ï†ïÌïòÏÑ∏Ïöî -->
                      <!-- 5Í∞úÏùò ÎÖ∏ÎûÄÏÉâ Î≥Ñ -->
                      <!-- Î≥Ñ 1 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                          d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                          stroke="#F7D358"
                          fill="#F7D358"
                          stroke-linejoin="round"
                          stroke-linecap="round"
                          stroke-width="1"
                        ></path>
                      </svg>
                      <!-- Î≥Ñ 2 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                          d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                          stroke="#F7D358"
                          fill="#F7D358"
                          stroke-linejoin="round"
                          stroke-linecap="round"
                          stroke-width="1"
                        ></path>
                      </svg>
                      <!-- Î≥Ñ 3 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                          d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                          stroke="#F7D358"
                          fill="#F7D358"
                          stroke-linejoin="round"
                          stroke-linecap="round"
                          stroke-width="1"
                        ></path>
                      </svg>
                      <!-- Î≥Ñ 4 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                          d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                          stroke="#F7D358"
                          fill="#F7D358"
                          stroke-linejoin="round"
                          stroke-linecap="round"
                          stroke-width="1"
                        ></path>
                      </svg>
                      <!-- Î≥Ñ 5 -->
                      <svg class="star" viewBox="0 0 25 25">
                        <path
                          d="M12,2 L15,9 L22,9 L17,14 L18,21 L12,17 L6,21 L7,14 L2,9 L9,9 Z"
                          stroke="#F7D358"
                          fill="#F7D358"
                          stroke-linejoin="round"
                          stroke-linecap="round"
                          stroke-width="1"
                        ></path>
                      </svg>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="cafe24"
                style="padding-top: 10px; padding-bottom: 10px"
              >
                <%= review.comment%>
              </div>
            </div>
            <% }%>
          </div>
        </div>
        <%}%>
      </div>
    </div>

    <div id="modalContainer" class="hidden">
      <div id="modalContent">
        <p class="title" style="padding: 20px; font-size: 30px">
          ÏÜåÏ§ëÌïú Î¶¨Î∑∞Î•º ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî
        </p>
        <p style="padding: 20px; font-weight: bolder">
          <span class="otherTitle" style="color: #8783f5"
            ><%= publicParkingDetailResult.name%> </span
          >Ïñ¥Îñ†ÏÖ®ÎÇòÏöî?
        </p>
        <div
          style="display: flex; justify-content: space-between; margin: 20px"
        >
          <div class="otherTitle" style="font-size: 20px">ÌèâÏ†ê</div>
          <div class="rating">
            <span class="rating__result"></span>
            <i class="rating__star far fa-star"></i>
            <i class="rating__star far fa-star"></i>
            <i class="rating__star far fa-star"></i>
            <i class="rating__star far fa-star"></i>
            <i class="rating__star far fa-star"></i>
          </div>
        </div>
        <div style="display: flex; justify-content: center">
          <textarea
            rows="20"
            cols="40"
            class="textContent spContent"
            id="comment"
          ></textarea>
        </div>
        <div
          style="
            display: flex;
            justify-content: space-evenly;
            padding-top: 20px;
          "
        >
          <div class="modalBtn spBtn" id="modalCloseButton">Ï∑®ÏÜåÌïòÍ∏∞</div>
          <div
            class="modalBtn spBtn"
            onclick="enrollReview(<%= publicParkingDetailResult.id%>)"
          >
            Î¶¨Î∑∞ÏûëÏÑ±
          </div>
        </div>
      </div>
    </div>
    <input type="hidden" id="score" />
  </body>
  <script>
    const ratingStars = [...document.getElementsByClassName("rating__star")];
    const ratingResult = document.querySelector(".rating__result");

    printRatingResult(ratingResult);

    function executeRating(stars, result) {
      const starClassActive = "rating__star fas fa-star";
      const starClassUnactive = "rating__star far fa-star";
      const starsLength = stars.length;
      let i;
      stars.map((star) => {
        star.onclick = () => {
          i = stars.indexOf(star);

          if (star.className.indexOf(starClassUnactive) !== -1) {
            printRatingResult(result, i + 1);
            for (i; i >= 0; --i) stars[i].className = starClassActive;
          } else {
            printRatingResult(result, i);
            for (i; i < starsLength; ++i)
              stars[i].className = starClassUnactive;
          }
        };
      });
    }

    function printRatingResult(result, num = 0) {
      result.textContent = `${num}/5`;
      const score = document.getElementById("score");
      score.value = `${num}`;
    }

    executeRating(ratingStars, ratingResult);

    function modalOpen() {
      const modalCloseButton = document.getElementById("modalCloseButton");
      const modal = document.getElementById("modalContainer");
      modal.classList.remove("hidden");

      modalCloseButton.addEventListener("click", () => {
        modal.classList.add("hidden");
      });
    }

    async function enrollReview(id) {
      const result = await axios({
        method: "POST",
        url: "/publicparking/detail/reviews",
        data: {
          publicParkingId: id,
          score: document.getElementById("score").value,
          comment: document.getElementById("comment").value,
        },
        headers: {
          Authorization: `${localStorage.getItem("token")}`,
        },
      });
      console.log(result);

      if (result) {
        alert("Î¶¨Î∑∞Í∞Ä Ï†ïÏÉÅÏ†ÅÏúºÎ°ú ÏûëÏÑ±ÎêòÏóàÏäµÎãàÎã§.");
        document.location.href = `/publicparking/detail?id=${id}`;
      }
    }
    // Î≥ÄÏàòÎ•º Ï∂îÍ∞ÄÌïòÏó¨ Î©îÎâ¥ ÏÉÅÌÉúÎ•º Ï∂îÏ†ÅÌï©ÎãàÎã§.
    var isMenuVisible = false;

    function toggleMenu() {
      var menu = document.getElementById("menu-container");
      if (!isMenuVisible) {
        menu.style.right = "0";
      } else {
        menu.style.right = "-300px";
      }

      // Î©îÎâ¥ ÏÉÅÌÉúÎ•º ÏóÖÎç∞Ïù¥Ìä∏Ìï©ÎãàÎã§.
      isMenuVisible = !isMenuVisible;
    }
    // Îã´Í∏∞ Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠Ìï† Îïå Î©îÎâ¥Î•º Ïà®ÍπÅÎãàÎã§.
    function closeMenu() {
      var menu = document.getElementById("menu-container");
      menu.style.right = "-300px";
      isMenuVisible = false;
    }

    // ÏòàÏïΩ ÏïåÎûå Ïù¥Îèô
    function reservationAlarm() {
      location.href = "/user/reservation";
    }

    // ÌöåÏõê Ï†ïÎ≥¥ ÏàòÏ†ï Ïù¥Îèô
    function profileEdit() {
      location.href = "/mypage/:userid/edit";
    }

    // ÌöåÏõê Ï†ïÎ≥¥ ÏàòÏ†ï Ïù¥Îèô
    function profileEdit() {
      const token = localStorage.getItem("token");

      if (token) {
        axios
          .get("/data", {
            headers: {
              Authorization: `Bearer ${token}`,
            },
          })
          .then((response) => {
            const userId = response.data.responseData.data.userid;
            console.log(userId);
            location.href = `/mypage/${userId}`;
          })
          .catch((error) => {
            console.log(error);
          });
      } else {
        location.href = "/user/login";
      }
    }

    // ÏòàÏïΩÎÇ¥Ïó≠Ï°∞Ìöå Ïù¥Îèô
    function userReservation() {
      location.href = "/user/reservation";
    }

    // Î°úÍ∑∏Ïù∏ Ïú†Î¨¥Ïóê Îî∞Î•∏ ÎãâÎÑ§ÏûÑ Í∞í ÌëúÏãú
    window.addEventListener("DOMContentLoaded", () => {
      const token = localStorage.getItem("token");
      const loginLogoutButton = document.getElementById("loginLogoutButton");
      const userNickElement = document.querySelector(".userNick"); // ÏÇ¨Ïö©Ïûê ÎãâÎÑ§ÏûÑ ÏóòÎ¶¨Î®ºÌä∏

      if (token) {
        // ÌÜ†ÌÅ∞Ïù¥ ÏûàÎäî Í≤ΩÏö∞
        loginLogoutButton.innerText = "Î°úÍ∑∏ÏïÑÏõÉ";

        axios
          .get("/data", {
            headers: {
              Authorization: `Bearer ${token}`,
            },
          })
          .then((response) => {
            const userNickname = response.data.responseData.data.nickname;
            userNickElement.innerText = userNickname;
          })
          .catch((error) => {
            console.log(error);
          });
      } else {
        // ÌÜ†ÌÅ∞Ïù¥ ÏóÜÎäî Í≤ΩÏö∞
        userNickElement.innerText = "Î°úÍ∑∏Ïù∏Ìï¥Ï£ºÏÑ∏Ïöî";
      }
    });

    //Î°úÍ∑∏ÏïÑÏõÉ
    //Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú Ïãú Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄ ÌÜ†ÌÅ∞ ÎπÑÏö∞ÎèÑÎ°ù
    //Î°úÍ∑∏ÏïÑÏõÉ ÏÉÅÌÉú Ïãú /user/login Ïù¥Îèô
    function logout() {
      const token = localStorage.getItem("token");
      const loginLogoutButton = document.getElementById("loginLogoutButton");

      if (token) {
        if (confirm("Î°úÍ∑∏ÏïÑÏõÉ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) {
          localStorage.removeItem("token");
          loginLogoutButton.innerText = "Î°úÍ∑∏Ïù∏/ÌöåÏõêÍ∞ÄÏûÖ";

          alert("Î°úÍ∑∏ÏïÑÏõÉ ÎêòÏóàÏäµÎãàÎã§!");

          //Î°úÍ∑∏ÏïÑÏõÉ ÌõÑ ÏÉàÎ°úÍ≥†Ïπ®
          setTimeout(() => {
            location.reload();
          }, 1000);
        }
      } else {
        location.href = "/user/login";
      }
    }

    window.addEventListener("DOMContentLoaded", () => {
      const token = localStorage.getItem("token");
      const loginLogoutButton = document.getElementById("loginLogoutButton");

      if (token) {
        loginLogoutButton.innerText = "Î°úÍ∑∏ÏïÑÏõÉ";
      }
    });

    //ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ ÎùÑÏö∞Í∏∞
    const token = localStorage.getItem("token");
    if (token) {
      axios
        .get("/data", {
          headers: {
            Authorization: `Bearer ${token}`,
          },
        })
        .then((response) => {
          const profileUrl = response.data.responseData.data.profile;
          const profilePic = document.getElementById("profilePic");
          profilePic.src = profileUrl;
        })
        .catch((error) => {
          console.log(error);
        });
    } else {
      profilePic.src =
        "https://kdt8-cs.s3.ap-northeast-2.amazonaws.com/%EC%A3%BC%EC%B0%A8%ED%95%98%EC%B9%B4_icon/profile.svg";
    }

    //Í≥µÏú†Ï£ºÏ∞®Ïû•Îì±Î°ù Ïù¥Îèô
    function parkingAdd() {
      location.href = "/shareparking";
    }

    //Ï±ÑÌåÖÎ∞© Ïù¥Îèô
    function chatBtn() {
      console.log("front Ï±ÑÌåÖÎ∞©ÌÅ¥Î¶≠");
      location.href = "/chat";
    }

    //myÏ±ÑÌåÖÎÇ¥Ïó≠
    function chatListBtn() {
      console.log("front Ï±ÑÌåÖÎ∞©Î¶¨Ïä§Ìä∏ ÌÅ¥Î¶≠");
      const token = localStorage.getItem("token");
      if (!token) {
        alert("Î°úÍ∑∏Ïù∏ Ìï¥Ï£ºÏÑ∏Ïöî");
        return;
      } else {
        axios
          .get("/data", {
            headers: {
              Authorization: `Bearer ${token}`,
            },
          })
          .then((response) => {
            console.log("chatList", response);
            const userid = response.data.responseData.data.id;
            console.log("ÌöåÏõêÎ≤àÌò∏", userid);
            location.href = `/chatList/${userid}`;
          })
          .catch((error) => {
            console.log("chatListÏóêÎü¨", error);
            document.location.reload();
          });
      }
    }

    async function getMySharePark() {
      let id;
      let check;
      try {
        const result = await axios({
          method: "POST",
          url: "/shareparking/mysharepark",
          headers: {
            Authorization: `${localStorage.getItem("token")}`,
          },
        });
        console.log(result);
        id = result.data.id;
        check = result.data.result;
      } catch (err) {
        console.log(err);
      }
      console.log("Î∞ñ", id);
      if (check) {
        document.location.href = `/shareparking/myshareparks?id=${id}`;
      }
    }
  </script>
</html>
